<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>very long cat: zero-latency network music with live coding</title>
  <script src="jquery-1.11.3.min.js"></script>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="css/iclc.css" type="text/css" />
</head>
<body><img src="/images/ICLC-Website-Logo.png" /><br />Proceedings of the <a href="/papers.html">First International Conference on Live Coding</a><hr />
<div id="header">
<h1 class="title">very long cat: zero-latency network music with live coding</h1>
<table id="authorlist"><tr>
<td>  David Ogborn<br />
  McMaster University
</td>
<td>  Shawn Mativetsky<br />
  CIRMMT, Schulich School of Music, McGill University
</td>
</tr></table>
</div>

<h2 class="abstract">Abstract</h2>
<div id="abstract">
<p>very long cat are a new network music duo combining tabla and live coding, rehearsing and performing via the Internet, and employing an eclectic range of techniques and technologies. The specific structure of the ensemble’s network music setup, with one musician live coding and monitoring their own performance with a calibrated delay, allows both musicians to experience each other’s performances as synchronized. This poster focuses on the evolving technical configuration of this hybrid ensemble, with an emphasis on the constraints imposed by the insistence on “zero latency” in a live coding ensemble (some sound transformations are not feasible, and others are implemented in a characteristic way).</p>
</div>

<h1 id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p>very long cat are a new network music duo combining tabla and live coding <span class="citation">(Collins et al. 2003)</span>, rehearsing and performing via the Internet, and employing an eclectic range of techniques and technologies. The specific structure of the ensemble’s network music setup, with one musician live coding and monitoring their own performance with a calibrated delay, allows both musicians to experience each other’s performances as synchronized. This poster focuses on the evolving technical configuration of this hybrid ensemble, with an emphasis on the constraints imposed by the insistence on “zero latency” in terms of the sound results (some sound transformations are not feasible, and others are implemented in a characteristic way).</p>
<h1 id="tabla-traditions"><span class="header-section-number">2</span> Tabla Traditions</h1>
<p>The tabla is the most popular percussion instrument in India and is especially prevalent in the northern regions of the country, as well as in Pakistan. The tabla is an integral part of North Indian (Hindustani) classical music, where it can be performed solo, in kathak dance accompaniment, or to accompany melodic instruments (sitar, voice, violin, etc.). There are six different stylistic schools of playing (gharanas), many varied sounds and techniques, and a repertoire made up of a multitude of cyclic and cadential compositional forms <span class="citation">(Courtney 2000)</span>. The second author of this poster performs tabla in the style of the Benares gharana.</p>
<p>In the Benares gharana, the art of solo tabla performance is greatly respected and very highly developed, with more than twenty forms of composition in use, many of them unique to this tradition. The compositions can be broken down into two main types: theme-and-variation forms which require spontaneous improvisation by the performer, and fixed, composed pieces. In addition, there is a well-defined procedure and structure used for joining the various types of compositions together to form a logical and pleasing performance. Repertoire and performance practices are handed down from generation to generation through oral tradition <span class="citation">(Shepherd)</span>. The North Indian tabla is connected with live coding through the fact that both traditions, despite their very different age, are centred around the art of improvisation.</p>
<h1 id="a-zero-latency-network-music-configuration"><span class="header-section-number">3</span> A ‘Zero Latency’ Network Music Configuration</h1>
<p>It is in the nature of transmitting audio signals from one point to another that it takes time for them to arrive and be decoded/transcoded. Our everyday audio computing infrastructure exacerbates this latency through multiple layers of transmission and buffering. Latency is thus a central and perennial challenge of network music situations <span class="citation">(Carôt and Werner 2007; Whalley 2012)</span> and has been the focus of a number of distinct research streams.</p>
<p>One stream of network music research seeks to characterize the effect of latency on network-distributed musical performances. For example, a recent rhythmic clapping study <span class="citation">(C. Chafe, Cáceres, and Gurevich 2010)</span> involved pairs of rhythmic clapping performers separated physically and by carefully controlled delays ranging from 3 to 78 ms. The study revealed the existence of four distinct impacts of bi-directional delay/latency on ongoing musical tempo. Between 10 and 21 ms, tempo was stable, with a tendency to accelerate at lower latencies, a tendency to decelerate at higher latencies, and a marked deterioration of synchronization at even greater latencies (66 ms and higher).</p>
<p>Other network music research &quot;accepts&quot; the inevitability of latency and constructs new performance spaces and expectations around the specific temporal characteristics of the network <span class="citation">(Tanaka 2006; J.-P. Cáceres and Renaud 2008)</span>. Some systems even extend this acceptance of latency as far as measuring it and projecting it onto other parameters: The peerSynth software reduces the amplitude of sonic contributions from particular network nodes as the latency to that node increases, just as in acoustic transmission longer delays are produced by greater distances which also simultaneously produced reduced amplitudes <span class="citation">(Stelkens 2003)</span>. The Public Sound Objects system uses measurements of the latency to adjust the overall tempo, motivated by the insight that longer latencies are more sustainable at lower tempi <span class="citation">(Barbosa, Cardoso, and Geiger 2005)</span>.</p>
<p>In the very long cat ensemble, we take advantage of the fact that one of us is live coding to sidestep the problem of latency. Specifically, our configuration results in sonic events being aligned (synchronized) in the same way at both ends of the ensemble. We call this absolute alignment of the audio layer &quot;zero latency&quot; although it should be recognized that in terms of non-sonic elements of the overall performance situation, such as the interplay of actions and decisions between the two performers, latency still exists. Additionally, instantaneous transformations of the live tabla sound must be avoided if the &quot;zero latency&quot; audio synchronization is to be upheld. Even so, the experience of producing tightly synchronized ensemble rhythms in apparent defiance of network latency and geographic separation is musically rewarding, and represents a live-coding-specific &quot;road less travelled&quot; in network music practice.</p>
<p>Both performers in very long cat use jacktrip <span class="citation">(Caceres and Chafe 2009)</span> to send two channels of full-resolution, uncompressed audio to each other. The live coding performer uses jacktrip to transmit the sonic result of his live coding, while the tabla player transmits the signal captured by two microphones, one close to each drum. After much experimentation with a number of high-end microphones, AKG C414 microphones were chosen, as they reliably capture the tabla’s sound across a wide range of timbres. Each player monitors the signal they receive from the other player as soon as possible.</p>
<p>The tabla player simply plays along in sync with what he hears. However, the live coding performer monitors the sounding result of their live coding at a small, calibrated delay equal to approximately the time it would take for network audio via jacktrip to do a complete round trip between the two locations. It is as if the local monitoring of the live coding were to line up in time with itself as transmitted and then transmitted back. Typically, this delay is 111 milliseconds, a figure arrived at by playing identifiable beats together and adjusting the delay until the synchronization is aurally pleasing. Essentially, this technique exploits the gestural ambivalence of live coding (intentions and results are not, as a rule, tightly synchronized) to overcome the fundamental problem of latency in network music. The live coding performer does not need to hear the results of their work immediately, and so can “afford” to monitor their work at a small delay.</p>
<p>During rehearsal and telematic production situations, our bi-directional stereo jacktrip connection is solid enough that dropouts (brief periods of missing audio data) are quite infrequent and do not disturb our co-performance relationship. However, these infrequent dropouts are frequent enough to damage recordings of these sessions. For this reason, we record 4 channels of audio at both ends of the situation: each performer records the signals they are producing/transmitting as well as the signals they are receiving from the other player. The brief dropouts are only found in the received signals, so a “perfect” recording can be reconstructed by combining the “local” signal from each player. In each 4-channel recording, the presence of the received signal acts as an indication and record of how time was aligned at each performance site.</p>
<p>Both players use a Max patch that has been developed and maintained to provide for the requisite delay in monitoring (at the live coding end of the ensemble) and the 4-channel audio recording. This Max patch, the live coding in SuperCollider, and jacktrip are thus connected as follows:</p>
<div class="figure">
<img src="jack.jpg" alt="Jack connections on the live coding end of the ensemble" /><p class="caption"><em>Jack connections on the live coding end of the ensemble</em></p>
</div>
<h1 id="live-coding-around-latency-with-live-electronics"><span class="header-section-number">4</span> Live Coding around Latency with Live Electronics</h1>
<p>The live coding in very long cat is performed in the SuperCollider language <span class="citation">(McCartney 1998)</span>. In general, the live coding consists alternately of pattern constructions in SuperCollider’s standard pattern classes, or “modular synthesis” style notation of live electronics using the JITlib notations advanced by Julian Rohrhuber and others.</p>
<p>A central technique is the “live electronic” transformation of the signal from the live tabla player. For example, the envelope of the (stereo) live tabla signal can be extracted and then re-applied to synthetic sounds that are specified as the result of oscillators, low-frequency oscillators, etc. The ensemble insists on only applying those techniques that allow both players to experience the sonic results as synchronized in the same way. An immediate consequence of this is that no immediate transformations of the tabla sound can be used, as the result of such transformations would not be immediately audible to the tabla player at the other end of the jacktrip connection.</p>
<p>Instead, the transformations of the live tabla sound must always take effect at a delay. At a minimum, if the zero-latency requirement is upheld, this delay must be equal to the round trip delay of the jacktrip transmission. In practice, however, we tend to use delay times that are lined up to metric structures (like a beat at a normal tempo, or a bar, or longer).</p>
<p>In the SuperCollider live coding, the delay time has to be modified from the straightforward intended delay time on account of the latency of the network music situation. For example, if the tabla player strikes the drum at a given time, this arrives at the live coding end only after a half-round-trip delay. Whatever the live coding performer sends back will arrive at the tabla player only after a further half-round-trip delay. Thus, in order to apply a delayed live electronic effect to the live tabla player’s performance, the live coding performer must delay the input from the tabla by the intended delay time minus a full round-trip delay time.</p>
<p>This modified delay is accomplished via a SuperCollider extension that is maintained specifically for the ensemble, with has the added benefit of supporting theatrically-named class methods. This allows the projected code to accurately display the intention of delaying the sound by a given metric amount, while concealing the modification to the delay time that is made necessary by the network music situation:</p>
<pre class="superCollider"><code>    *delay {
        | signal,time |
        ^DelayN.ar(signal,time-roundTrip,time-roundTrip);
    }</code></pre>
<p>Given the preceding method in the VLCat class/extension, the following is an example of a simple sound transformation whereby a delayed signal from the tabla player affects the envelope of a synthetic signal four beats later, with this intention clearly signalled in the code (the 4/TempoClock.tempo, and experienced as a one-bar delay at both ends of the telematic link:</p>
<pre class="superCollider"><code>~a = { LFTri.ar([440,550],mul:-20.dbamp) }
~b = { Amplitude.ar(Envelope.ar(VLCat.delay(~tabla.ar,4/TempoClock.tempo),0.1,0.01) }
~c = { ~a.ar * ~b.ar }
~c.play</code></pre>
<h1 id="supporting-videos"><span class="header-section-number">5</span> Supporting Videos</h1>
<p>Delay Study (February 2015): https://www.youtube.com/watch?v=2gehI46oNvk</p>
<p>Groove Study (February 2015): https://www.youtube.com/watch?v=2i9CG2Ayl8A</p>
<h2 id="acknowledgements"><span class="header-section-number">5.1</span> Acknowledgements</h2>
<p>We gratefully acknowledge the assistance of the Centre for Interdisciplinary Research in Music Media and Technology (CIRMMT) at McGill University, and the Arts Research Board at McMaster University.</p>
<div class="references">
<h1><span class="header-section-number">5.1</span> References</h1>
<p>Barbosa, Álvaro, Jorge Cardoso, and Gunter Geiger. 2005. “Network Latency Adaptive Tempo in the Public Sound Objects System.” In <em>Proceedings of New Interfaces for Music Expression 2005, Vancouver, BC</em>. <a href="http://mtg.upf.edu/files/publications/9d0455-NIME05-barbosa.pdf">http://mtg.upf.edu/files/publications/9d0455-NIME05-barbosa.pdf</a>.</p>
<p>Cáceres, Juan-Pablo, and Alain B. Renaud. 2008. “Playing the Network: the Use of Time Delays as Musical Devices.” In <em>Proceedings of International Computer Music Conference</em>, 244–250. <a href="http://classes.berklee.edu/mbierylo/ICMC08/defevent/papers/cr1425.pdf">http://classes.berklee.edu/mbierylo/ICMC08/defevent/papers/cr1425.pdf</a>.</p>
<p>Caceres, J.-P., and C. Chafe. 2009. “JackTrip: Under the Hood of an Engine for Network Audio.” In <em>Proceedings of the International Computer Music Conference</em>, 509–512.</p>
<p>Carôt, Alexander, and Christian Werner. 2007. “Network Music Performance-Problems, Approaches and Perspectives.” In <em>Proceedings of the “Music in the Global Village”-Conference, Budapest, Hungary</em>. <a href="http://www.carot.de/Docs/MITGV_AC_CW.pdf">http://www.carot.de/Docs/MITGV_AC_CW.pdf</a>.</p>
<p>Chafe, Chris, Juan-Pabla Cáceres, and Michael Gurevich. 2010. “Effect of Temporal Separation on Synchronization in Rhythmic Performance.” <em>Perception</em> 39: 982–92.</p>
<p>Collins, Nick, Alex McLean, Julian Rohrhuber, and Adrian Ward. 2003. “Live Coding in Laptop Performance.” <em>Organised Sound</em> 8 (03) (Dec). doi:<a href="http://dx.doi.org/10.1017/S135577180300030X">10.1017/S135577180300030X</a>. <a href="http://www.journals.cambridge.org/abstract_S135577180300030X">http://www.journals.cambridge.org/abstract_S135577180300030X</a>.</p>
<p>Courtney, David. 2000. <em>Advanced Theory of Tabla</em>. 1st ed. Houston: Sur Sangeet Services.</p>
<p>McCartney, J. 1998. “Continued Evolution of the SuperCollider Real-Time Synthesis Environment.” In <em>Proceedings of the ICMC</em>. <a href="http://quod.lib.umich.edu/cgi/p/pod/dod-idx/continued-evolution-of-the-supercollider-real-time-synthesis.pdf?c=icmc;idno=bbp2372.1998.262">http://quod.lib.umich.edu/cgi/p/pod/dod-idx/continued-evolution-of-the-supercollider-real-time-synthesis.pdf?c=icmc;idno=bbp2372.1998.262</a>.</p>
<p>Shepherd, Frances. <em>Tabla and the Benares Gharana (PhD Dissertation)</em>.</p>
<p>Stelkens, J. 2003. “PeerSynth: a P2P Multi-User Software with New Techniques for Integrating Latency in Real Time Collaboration.” In <em>Proceedings of the International Computer Music Conference</em>.</p>
<p>Tanaka, Atau. 2006. “Interaction, Experience, and the Future of Music.” <em>Computer Supported Cooperative Work</em> 35: 267–288.</p>
<p>Whalley, Ian. 2012. “Internet2 and Global Electroacoustic Music: Navigating a Decision Space of Production, Relationships and Languages.” <em>Organised Sound</em> 17 (01) (Apr): 4–15. doi:<a href="http://dx.doi.org/10.1017/S135577181100046X">10.1017/S135577181100046X</a>.</p>
</div>
</body>
</html>
